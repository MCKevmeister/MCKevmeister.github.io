I"ò<h2 id="nat-firewall">NAT Firewall</h2>

<p>NAT short for Network address transition. It was created to solve the problem that is inherent with IPv4 a limit of 4.3 billion public IP addresses. The reason that this has become a problem is that of the 5 billion people that are on the planet most have at least 1 device that requires an IP address to connect to the internet.</p>

<p>NAT works by creating a lookup table inside of a router. The router stores information in a lookup table for resolving the address of the packets that are sent through it. Each packet has a header. In that header it contains meta information about the packet, including who the packet is being sent from and to. The router uses its lookup tables (both forward and reverse) to find out where the packet should be sent to.</p>

<p>Below is an example of NAT. Computer A sends a packet to computer B. Computer A is inside a NAT with an IP of 192.168.2.23 and it thinks that it knows to send a packet to 192.31.7.130. When The packet passes the router, the router looks into the forwarding lookup table to find the IP of the packet if a domain name is being passed, or uses the IP address directly and sends that packet on to the next node in the network that is closest to the destination IP. It also logs the request for the destination IP and source. When the packet leaves the router, its source IP is masqueraded under the public IP of the router 202.10.5.23.</p>

<p>When computer B sends a packet to computer A the header of the packet contains the source IP as computer B‚Äôs address. This might also be masqueraded by a router, but it does not concern the network. When the NAT router receives the packet, it checks the header file for the source and destination IP, checks if the destination IP is in its reverse lookup table, if it then it sends the packet on to the destination IP 192.168.2.23.</p>

<p>If a packet comes in from an external IP address that is not in a lookup table, then the firewall will stop the packet from being sent on. This can be fine tuned by blocking or allowing ports for example I might allow the IP public address of a remote administrator to access any computer on the Nat using SSH on port 22.</p>

<p><img src="/assets/images/NAT-Firewall.png" alt="NAT Firewall Example" /></p>

<h2 id="openssh">OpenSSH</h2>

<p><a href="https://www.openssh.com/">OpenSSH</a> is an open source project of the OpenBSD foundation. It‚Äôs intention is to allow the SSH protocol to work will all operating systems. It uses the LibreSSL library for its cryptographic routines such as AES-GMC. The project is licenced under OpenBSD-style licecne. OpenSSH uses the SSH 2 protocol which was made open source to avoid patent issues with the RSA algorithm of the older SSH 1 protocol.</p>

<h3 id="openssh-using-wsl">OpenSSH using WSL</h3>

<p>Using a root account OpenSSH can be installed from a terminal using</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">sudo </span>apt-get <span class="nb">install </span>openssh-server
</code></pre></div></div>

<p><img src="/assets/images/ssh-WSL1.png" alt="install ssh server" />
Edit the config file using nano</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>  <span class="nb">sudo </span>nano /etc/ssh/sshd_config
</code></pre></div></div>

<p><img src="/assets/images/ssh-WSL3.png" alt="edit config file" />
When nano loads uncomment the set the following</p>

<ul>
  <li>PermisionRootLogin no</li>
  <li>AllowUsers yourusername</li>
  <li>PasswordAuthentication yes</li>
  <li>#UsePrivilegeSeparation no</li>
</ul>

<p><img src="/assets/images/ssh-WSL4.png" alt="nano interface" />
Using <a href="https://putty.org/">PuTTY</a> ssh into the computer using the computer name</p>

<p><img src="/assets/images/ssh-WSL6.png" alt="PuTTY interface" />
Use the username setup previously in the config file that has a user account in the computer you are accessing</p>

<p><img src="/assets/images/ssh-WSL7.png" alt="putty sign into remote computer" /></p>

<p><img src="/assets/images/ssh-WSL8.png" alt="ssh server" /></p>

<h3 id="openssh-using-powershell">OpenSSH using PowerShell</h3>

<p>Microsoft‚Äôs <a href="https://docs.microsoft.com/en-us/windows-server/administration/openssh/openssh_install_firstuse">documentation</a> identify‚Äôs how to install both the server and client roles of SSH. Once installed and configured, usage in PowerShell is as follows</p>

<pre><code class="language-PowerShell">Ssh username@servername
</code></pre>

<p>If a connection can be established at the provided server name, then the following message will be displayed</p>

<pre><code class="language-PowerShell">The authenticity of host 'servername (10.00.00.001)' can't be established.
ECDSA key fingerprint is SHA256:(&lt;a large string&gt;).
Are you sure you want to continue connecting (yes/no)?
</code></pre>

<p>Enter yes, and there will be prompted for the user password. For security, the password will not be displayed as you type. If the password entered is correct, then a command prompt shell will be presented.</p>

<pre><code class="language-PowerShell">domain\username@SERVERNAME C:\Users\username&gt;
</code></pre>

<p>References</p>

<p>Download PuTTY - a free SSH and telnet client for Windows. (n.d.). Putty.Org. Retrieved September 19, 2020, from https://putty.org/
How can I SSH into ‚ÄúBash on Ubuntu on Windows 10‚Äù? (n.d.). Super User. Retrieved September 19, 2020, from https://superuser.com/questions/1111591/how-can-i-ssh-into-bash-on-ubuntu-on-windows-10/1114162#1114162</p>

<p>maertendMSFT. (2019, September 27). Installation of OpenSSH For Windows. Docs.Microsoft.Com. https://docs.microsoft.com/en-us/windows-server/administration/openssh/openssh_install_firstuse</p>

<p>OpenSSH. (2020, May 27). www.Openssh.Com. https://www.openssh.com/
OpenSSH: Goals. (n.d.). Www.Openssh.Com. Retrieved September 19, 2020, from https://www.openssh.com/goals.html</p>
:ET